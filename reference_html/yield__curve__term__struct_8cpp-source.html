<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Progetto per il pricing di un&#39;opzione:  File sorgente yield_curve_term_struct.cpp</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generato da Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Pagina&nbsp;Principale</span></a></li>
      <li><a href="annotated.html"><span>Classi</span></a></li>
      <li class="current"><a href="files.html"><span>File</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;Cerca&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>yield_curve_term_struct.cpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//###################################################################################################</span>
<a name="l00002"></a>00002 <span class="comment">//      </span>
<a name="l00003"></a>00003 <span class="comment">//      FILE NAME :                     yield_curve_term_struct.cpp</span>
<a name="l00004"></a>00004 <span class="comment">//      </span>
<a name="l00005"></a>00005 <span class="comment">//      FILE TYPE :                     C++ file</span>
<a name="l00006"></a>00006 <span class="comment">//              </span>
<a name="l00007"></a>00007 <span class="comment">//      AUTHORS :                       Mariacristina Romano, Gianmaria Enea Roat</span>
<a name="l00008"></a>00008 <span class="comment">//      </span>
<a name="l00009"></a>00009 <span class="comment">//      DESCRIPTION :           Implementation of class Yield_curve_term_struct</span>
<a name="l00010"></a>00010 <span class="comment">//      </span>
<a name="l00011"></a>00011 <span class="comment">//      FIRST VERSION :         2009/dec/13</span>
<a name="l00012"></a>00012 <span class="comment">//      </span>
<a name="l00013"></a>00013 <span class="comment">//      LAST UPDATE :           2010/feb/20</span>
<a name="l00014"></a>00014 <span class="comment">//      </span>
<a name="l00015"></a>00015 <span class="comment">//      STATUS :                        final</span>
<a name="l00016"></a>00016 <span class="comment">//              </span>
<a name="l00017"></a>00017 <span class="comment">//      COPYRIGHT :                     none</span>
<a name="l00018"></a>00018 <span class="comment">//      </span>
<a name="l00019"></a>00019 <span class="comment">//      </span>
<a name="l00020"></a>00020 <span class="comment">//      DETAILED DESCRIPTION :  Rappresenta una curva dei tassi complessa, costruita sull’interpolazione di dati.</span>
<a name="l00021"></a>00021 <span class="comment">//                                      Supponendo di essere a conoscenza del valore del tasso a certi tempi fissati si costrutisce una curva discreta. Nei metodi da noi </span>
<a name="l00022"></a>00022 <span class="comment">//                                      implemntati abbiamo utilizzato una semplice interpolazione lineare per ricavare il valore del tasso a tempi diversi da quelli "conosciuti"</span>
<a name="l00023"></a>00023 <span class="comment">//                                       dall'oggetto in esame. La formula utilizzata è:</span>
<a name="l00024"></a>00024 <span class="comment">//                                       tax(t)=tax(t1)+ (tax(t2)-tax(t1)) * (t-t1) / (t2-t1); </span>
<a name="l00025"></a>00025 <span class="comment">//                                       dove t è il tempo a cui vogliamo trovare il tasso tax(t), t1 e t2 sono gli estremi dell'intervallo temporale a noi noto </span>
<a name="l00026"></a>00026 <span class="comment">//                                       che contiene t e tax(t1), tax(t2) sono i tassi( a noi noti) in tali istanti.</span>
<a name="l00027"></a>00027 <span class="comment">//                                       Abbiamo considerato la curva come costante nel caso in cui t fosse compreso tra "today" e la prima data a nostra disposizione e </span>
<a name="l00028"></a>00028 <span class="comment">//                                       nel caso in cui t fosse superiore all'ultima data conosciuta. </span>
<a name="l00029"></a>00029 <span class="comment">//                                       Contiene un membro statico per la curva dei tassi risk-free.</span>
<a name="l00030"></a>00030 <span class="comment">//                                       Il costruttore completo della classe accetta quindi il numero di punti conosciuti, un vettore di Deltatime( per le date di riferimento) </span>
<a name="l00031"></a>00031 <span class="comment">//                                       ed un vettore di double per i tassi.</span>
<a name="l00032"></a>00032 <span class="comment">//      </span>
<a name="l00033"></a>00033 <span class="comment">//###################################################################################################</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="comment">//###################################################################################################</span>
<a name="l00037"></a>00037 <span class="comment">//INCLUDE</span>
<a name="l00038"></a>00038 <span class="comment">//###################################################################################################</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include "yield_curve_term_struct.hpp"</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include "time.hpp"</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include "errorlist.hpp"</span>
<a name="l00042"></a>00042 <span class="comment">//#########################################################################################################</span>
<a name="l00043"></a>00043 <span class="comment">//COSTRUTTORI~DISTRUTTORE</span>
<a name="l00044"></a>00044 <span class="comment">//#########################################################################################################</span>
<a name="l00045"></a>00045 
<a name="l00047"></a><a class="code" href="classYield__curve__term__struct.html#a3af386b72fd8c3211213424102a7e6c">00047</a> <a class="code" href="classYield__curve__term__struct.html#a3af386b72fd8c3211213424102a7e6c" title="costruttore di default">Yield_curve_term_struct::Yield_curve_term_struct</a>(): <a class="code" href="classYield__curve.html" title="Classe che rappresenta una generica curva dei tassi.">Yield_curve</a>(), _n(0){
<a name="l00048"></a>00048         _time=NULL;
<a name="l00049"></a>00049         _tax=NULL;
<a name="l00050"></a>00050 };
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 
<a name="l00054"></a><a class="code" href="classYield__curve__term__struct.html#13c1f565966d05a2ed586ae10f8a6e8d">00054</a> <a class="code" href="classYield__curve__term__struct.html#a3af386b72fd8c3211213424102a7e6c" title="costruttore di default">Yield_curve_term_struct::Yield_curve_term_struct</a>(<span class="keywordtype">int</span> n, <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> *time, <span class="keywordtype">double</span> *tax): <a class="code" href="classYield__curve.html" title="Classe che rappresenta una generica curva dei tassi.">Yield_curve</a>(){
<a name="l00055"></a>00055         <span class="comment">//controllo sulla dimensione</span>
<a name="l00056"></a>00056         <span class="keywordflow">if</span>(n&lt;=0){
<a name="l00057"></a>00057                 <span class="keywordflow">if</span>(n&lt;0){
<a name="l00058"></a>00058                         <a class="code" href="classErrorList.html#a1e0bae7f5e739abfebbc8c1513783e2" title="funzione che chiama il costruttore">ErrorList::Get_errorlist</a>()-&gt;<a class="code" href="classErrorList.html#ae61ca67f3f91063faa122307ba4d05a" title="funzione che consente l&amp;#39;aggiunta di un errore al file">Add_error</a>(<span class="stringliteral">"Yield_curve_term_struct::(constructor) dimension must be positive"</span>);
<a name="l00059"></a>00059                 }
<a name="l00060"></a>00060                 _n=0;
<a name="l00061"></a>00061                 _time=NULL;
<a name="l00062"></a>00062                 _tax=NULL;
<a name="l00063"></a>00063         }
<a name="l00064"></a>00064         <span class="keywordflow">else</span>{
<a name="l00065"></a>00065                 <span class="comment">//costruisco vettori di deltatime e tassi e li riempio</span>
<a name="l00066"></a>00066                 _time=<span class="keyword">new</span> <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a>[_n-1];
<a name="l00067"></a>00067                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;(_n-1);i++) _time[i]=time[i];
<a name="l00068"></a>00068                 _tax=<span class="keyword">new</span> <span class="keywordtype">double</span>[_n];
<a name="l00069"></a>00069                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;_n;i++) _tax[i]=tax[i];
<a name="l00070"></a>00070         }
<a name="l00071"></a>00071 };
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 
<a name="l00075"></a><a class="code" href="classYield__curve__term__struct.html#60a77d3ef2686f0d0ec0933b3ce5ca2e">00075</a> <a class="code" href="classYield__curve__term__struct.html#a3af386b72fd8c3211213424102a7e6c" title="costruttore di default">Yield_curve_term_struct::Yield_curve_term_struct</a>(<span class="keywordtype">int</span> n): <a class="code" href="classYield__curve.html" title="Classe che rappresenta una generica curva dei tassi.">Yield_curve</a>(){
<a name="l00076"></a>00076         <span class="comment">//controllo sulla dimensione</span>
<a name="l00077"></a>00077         <span class="keywordflow">if</span>(n&lt;=0){
<a name="l00078"></a>00078                 <span class="keywordflow">if</span>(n&lt;0){
<a name="l00079"></a>00079                         <a class="code" href="classErrorList.html#a1e0bae7f5e739abfebbc8c1513783e2" title="funzione che chiama il costruttore">ErrorList::Get_errorlist</a>()-&gt;<a class="code" href="classErrorList.html#ae61ca67f3f91063faa122307ba4d05a" title="funzione che consente l&amp;#39;aggiunta di un errore al file">Add_error</a>(<span class="stringliteral">"Yield_curve_term_struct::(constructor) dimension must be positive"</span>);
<a name="l00080"></a>00080                 }
<a name="l00081"></a>00081                 _n=0;
<a name="l00082"></a>00082                 _time=NULL;
<a name="l00083"></a>00083                 _tax=NULL;
<a name="l00084"></a>00084         }
<a name="l00085"></a>00085         <span class="keywordflow">else</span>{
<a name="l00086"></a>00086                 <span class="comment">//costruisco vettori di deltatime e tassi</span>
<a name="l00087"></a>00087                 _time=<span class="keyword">new</span> <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a>[_n-1];
<a name="l00088"></a>00088                 _tax=<span class="keyword">new</span> <span class="keywordtype">double</span>[_n];
<a name="l00089"></a>00089                 <span class="comment">//pongo i tassi uguali a zero</span>
<a name="l00090"></a>00090                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;_n;i++) _tax[i]=0;
<a name="l00091"></a>00091         }
<a name="l00092"></a>00092 };
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 
<a name="l00096"></a><a class="code" href="classYield__curve__term__struct.html#e623ea01cbf87eda8bb59af507bf10d5">00096</a> <a class="code" href="classYield__curve__term__struct.html#a3af386b72fd8c3211213424102a7e6c" title="costruttore di default">Yield_curve_term_struct::Yield_curve_term_struct</a>(<span class="keyword">const</span> <a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a> &amp;nor):<a class="code" href="classYield__curve.html" title="Classe che rappresenta una generica curva dei tassi.">Yield_curve</a>(){
<a name="l00097"></a>00097         <span class="comment">//copio la dimensione</span>
<a name="l00098"></a>00098         _n=nor.<a class="code" href="classYield__curve__term__struct.html#1695721926f315079cc2568ce2803bb6">_n</a>;
<a name="l00099"></a>00099         <span class="comment">//creo i vettori di tempi e tassi e li copio</span>
<a name="l00100"></a>00100         _time=<span class="keyword">new</span> <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a>[_n-1];
<a name="l00101"></a>00101         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;(_n-1);i++) _time[i]=nor.<a class="code" href="classYield__curve__term__struct.html#680a58b0eaf2f0b50b44e4c7b5558690">_time</a>[i];
<a name="l00102"></a>00102         _tax=<span class="keyword">new</span> <span class="keywordtype">double</span>[_n];
<a name="l00103"></a>00103         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;_n;i++) _tax[i]=nor.<a class="code" href="classYield__curve__term__struct.html#52cdd454428b2d16c6b1e2ab783f1e88">_tax</a>[i];
<a name="l00104"></a>00104 };
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 
<a name="l00108"></a><a class="code" href="classYield__curve__term__struct.html#61a77e4db9a17c979bdc1c7c260bb2d6">00108</a> <a class="code" href="classYield__curve__term__struct.html#61a77e4db9a17c979bdc1c7c260bb2d6" title="distruttore">Yield_curve_term_struct::~Yield_curve_term_struct</a>(){
<a name="l00109"></a>00109         <span class="keywordflow">if</span>(_time!=NULL){
<a name="l00110"></a>00110                 <span class="keyword">delete</span>[] _time;
<a name="l00111"></a>00111         }
<a name="l00112"></a>00112         <span class="keywordflow">if</span>(_tax!=NULL){
<a name="l00113"></a>00113                 <span class="keyword">delete</span>[] _tax;
<a name="l00114"></a>00114         }
<a name="l00115"></a>00115 };
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="comment">//###################################################################################################</span>
<a name="l00118"></a>00118 <span class="comment">//FUNCTIONS</span>
<a name="l00119"></a>00119 <span class="comment">//###################################################################################################</span>
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">//###################################################################################################</span>
<a name="l00122"></a>00122 <span class="comment">//-----&gt; Class :        Yield_curve_term_struct</span>
<a name="l00123"></a>00123 <span class="comment">//-----&gt; Function name: Get_spot_rate</span>
<a name="l00124"></a>00124 <span class="comment">//-----&gt; Description :  restituisce il tasso corrispondente al tempo t interpolando linearmente</span>
<a name="l00125"></a>00125 <span class="comment">//###################################################################################################</span>
<a name="l00127"></a><a class="code" href="classYield__curve__term__struct.html#ac4284f8ec570ed2695dc4c30af8052d">00127</a> <span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="classYield__curve__term__struct.html#ac4284f8ec570ed2695dc4c30af8052d" title="funzione che restituisce il tasso corrispondente al tempo t interpolando linearmente...">Yield_curve_term_struct::Get_spot_rate</a>(<span class="keyword">const</span> <a class="code" href="classTime.html" title="Classe che rappresenta un istante temporale.">Time</a> &amp;t)<span class="keyword"> const</span>{
<a name="l00128"></a>00128         <span class="keywordtype">double</span> ris=0;
<a name="l00129"></a>00129         <span class="comment">//ottengo l'istante attuale</span>
<a name="l00130"></a>00130         <a class="code" href="classTime.html" title="Classe che rappresenta un istante temporale.">Time</a> today=*(<a class="code" href="classTime.html#c3f93f083ec4044299a6dc78d30c84a2" title="funzioine che crea il link statico all&amp;#39;oggetto today">Time::Get_today</a>());
<a name="l00131"></a>00131         <span class="comment">//controllo sull'istante passato (dev'essere nel futuro)</span>
<a name="l00132"></a>00132         <span class="keywordflow">if</span>(t&lt;today) {
<a name="l00133"></a>00133                 <a class="code" href="classErrorList.html#a1e0bae7f5e739abfebbc8c1513783e2" title="funzione che chiama il costruttore">ErrorList::Get_errorlist</a>()-&gt;<a class="code" href="classErrorList.html#ae61ca67f3f91063faa122307ba4d05a" title="funzione che consente l&amp;#39;aggiunta di un errore al file">Add_error</a>(<span class="stringliteral">"Yield_curve_term_struct::(Get_spot_rate) time must be in the future"</span>);
<a name="l00134"></a>00134         }
<a name="l00135"></a>00135         <span class="keywordflow">else</span> {
<a name="l00136"></a>00136                 <span class="comment">//se l'istante t sta tra adesso e il primo istante del vettore di tempi</span>
<a name="l00137"></a>00137                 <span class="keywordflow">if</span>(t&lt;=today+(_time[0])){
<a name="l00138"></a>00138                                 ris=_tax[0];
<a name="l00139"></a>00139                 }
<a name="l00140"></a>00140                 <span class="comment">//se l'istante t è oltre l'ultimo istante del vettore di tempi</span>
<a name="l00141"></a>00141                 <span class="keywordflow">if</span>(t&gt;=today+(_time[_n-1])){
<a name="l00142"></a>00142                                 ris=_tax[_n-1];
<a name="l00143"></a>00143                 }
<a name="l00144"></a>00144                 <span class="keywordflow">else</span> {
<a name="l00145"></a>00145                         <span class="comment">//negli altri casi interpolo linearmente</span>
<a name="l00146"></a>00146                         <span class="keywordtype">int</span> cont=-1;
<a name="l00147"></a>00147                         <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> tot;
<a name="l00148"></a>00148                         <span class="comment">//per trovare i 2 tempi tra i quali si trova il t passato al metodo</span>
<a name="l00149"></a>00149                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;_n;i++){
<a name="l00150"></a>00150                                 <span class="keywordflow">if</span>(t&gt;=today+tot) {
<a name="l00151"></a>00151                                         cont++;
<a name="l00152"></a>00152                                         tot+=_time[i];
<a name="l00153"></a>00153                                 }
<a name="l00154"></a>00154                                 <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
<a name="l00155"></a>00155                         }
<a name="l00156"></a>00156                         <span class="comment">//formula di interpolazione lineare</span>
<a name="l00157"></a>00157                         ris=(_tax[cont]+ (_tax[cont+1]-_tax[cont]) * ((t-(today+tot))) / (_time[cont]));
<a name="l00158"></a>00158                 }
<a name="l00159"></a>00159         }
<a name="l00160"></a>00160         <span class="keywordflow">return</span> ris;
<a name="l00161"></a>00161 };
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 <span class="comment">//###################################################################################################</span>
<a name="l00165"></a>00165 <span class="comment">//-----&gt; Class :        Yield_curve_term_struct</span>
<a name="l00166"></a>00166 <span class="comment">//-----&gt; Function name: Get_spot_rate</span>
<a name="l00167"></a>00167 <span class="comment">//-----&gt; Description :  restituisce il tasso corrispondente al deltatime t interpolando linearmente</span>
<a name="l00168"></a>00168 <span class="comment">//###################################################################################################</span>
<a name="l00170"></a><a class="code" href="classYield__curve__term__struct.html#01697098f22d806b075ac228769f6866">00170</a> <span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="classYield__curve__term__struct.html#ac4284f8ec570ed2695dc4c30af8052d" title="funzione che restituisce il tasso corrispondente al tempo t interpolando linearmente...">Yield_curve_term_struct::Get_spot_rate</a>(<span class="keyword">const</span> <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> &amp;t)<span class="keyword"> const</span>{
<a name="l00171"></a>00171         <span class="keywordtype">double</span> ris=0;
<a name="l00172"></a>00172         <span class="comment">//se il deltatime t è più piccolo del primo deltatime del vettore di tempi</span>
<a name="l00173"></a>00173         <span class="keywordflow">if</span>(t&lt;=(_time[0])){
<a name="l00174"></a>00174                 ris=_tax[0];
<a name="l00175"></a>00175         }
<a name="l00176"></a>00176         <span class="comment">//se il deltatime t è più grande dell'ultimo deltatime del vettore di tempi</span>
<a name="l00177"></a>00177         <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> all;
<a name="l00178"></a>00178         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;_n-1;i++) all+=_time[i];
<a name="l00179"></a>00179         <span class="keywordflow">if</span>(t&gt;=all){
<a name="l00180"></a>00180                 ris=_tax[_n-1];
<a name="l00181"></a>00181         }
<a name="l00182"></a>00182         <span class="keywordflow">else</span> {
<a name="l00183"></a>00183                 <span class="comment">//negli altri casi interpolo linearmente</span>
<a name="l00184"></a>00184                 <span class="keywordtype">int</span> cont=-1;
<a name="l00185"></a>00185                 <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> tot;
<a name="l00186"></a>00186                 <span class="comment">//per trovare i 2 deltatime tra i quali si trova il t passato al metodo</span>
<a name="l00187"></a>00187                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;_n-1;i++){
<a name="l00188"></a>00188                         <span class="keywordflow">if</span>(t&gt;=tot) {
<a name="l00189"></a>00189                                 cont++;
<a name="l00190"></a>00190                                 tot+=_time[i];
<a name="l00191"></a>00191                         }
<a name="l00192"></a>00192                         <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
<a name="l00193"></a>00193                 }
<a name="l00194"></a>00194                 <span class="comment">//formula di interpolazione lineare</span>
<a name="l00195"></a>00195                 ris=_tax[cont]+(_tax[cont+1]-_tax[cont])* ((t-tot) / (_time[cont]));
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197         <span class="keywordflow">return</span> ris;
<a name="l00198"></a>00198 };
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">//#########################################################################################################</span>
<a name="l00201"></a>00201 <span class="comment">//OPERATORE DI ASSEGNAMENTO</span>
<a name="l00202"></a>00202 <span class="comment">//#########################################################################################################</span>
<a name="l00203"></a>00203 
<a name="l00205"></a><a class="code" href="classYield__curve__term__struct.html#0b0439cea8fad293c456b1e0b1bd4387">00205</a> <a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a> &amp;<a class="code" href="classYield__curve__term__struct.html#0b0439cea8fad293c456b1e0b1bd4387" title="overloading dell&amp;#39;operatore di assegnamento">Yield_curve_term_struct::operator=</a>(<a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a> &amp;nor){
<a name="l00206"></a>00206         <span class="comment">//se le dimensioni sono diverse, pulisco i vettori e li ricreo</span>
<a name="l00207"></a>00207         <span class="keywordflow">if</span>(_n!=nor.<a class="code" href="classYield__curve__term__struct.html#1695721926f315079cc2568ce2803bb6">_n</a>) {
<a name="l00208"></a>00208                 <span class="keyword">delete</span>[] _tax;
<a name="l00209"></a>00209                 <span class="keyword">delete</span>[] _time;
<a name="l00210"></a>00210                 _n=nor.<a class="code" href="classYield__curve__term__struct.html#1695721926f315079cc2568ce2803bb6">_n</a>;
<a name="l00211"></a>00211                 _tax=<span class="keyword">new</span> <span class="keywordtype">double</span>[_n];
<a name="l00212"></a>00212                 _time=<span class="keyword">new</span> <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a>[_n-1];
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214         <span class="comment">//li copio (hanno dimensioni diverse)</span>
<a name="l00215"></a>00215         _tax[_n]=nor.<a class="code" href="classYield__curve__term__struct.html#52cdd454428b2d16c6b1e2ab783f1e88">_tax</a>[_n];
<a name="l00216"></a>00216         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;(_n-1);i++){
<a name="l00217"></a>00217                 _tax[i]=nor.<a class="code" href="classYield__curve__term__struct.html#52cdd454428b2d16c6b1e2ab783f1e88">_tax</a>[i];
<a name="l00218"></a>00218                 _time[i]=nor.<a class="code" href="classYield__curve__term__struct.html#680a58b0eaf2f0b50b44e4c7b5558690">_time</a>[i];
<a name="l00219"></a>00219         }
<a name="l00220"></a>00220         <span class="keywordflow">return</span> (*<span class="keyword">this</span>);
<a name="l00221"></a>00221 };
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="comment">//#########################################################################################################</span>
<a name="l00224"></a>00224 <span class="comment">//FUNZIONI GET</span>
<a name="l00225"></a>00225 <span class="comment">//#########################################################################################################</span>
<a name="l00226"></a>00226 
<a name="l00228"></a><a class="code" href="classYield__curve__term__struct.html#e855a12d9958faff988a02e29f16f578">00228</a> <span class="keywordtype">int</span> <a class="code" href="classYield__curve__term__struct.html#e855a12d9958faff988a02e29f16f578" title="funzione che restituisce il numero di punti">Yield_curve_term_struct::Get_n</a>()<span class="keyword"> const</span>{
<a name="l00229"></a>00229         <span class="keywordflow">return</span> _n;
<a name="l00230"></a>00230 };
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 
<a name="l00234"></a><a class="code" href="classYield__curve__term__struct.html#67edabb26e69d721be384593801d02a5">00234</a> <span class="keywordtype">double</span> <a class="code" href="classYield__curve__term__struct.html#67edabb26e69d721be384593801d02a5" title="funzione che restituisce l&amp;#39;iesimo tasso-spot ( tasso all&amp;#39;i-esimo tempo)">Yield_curve_term_struct::Get_tax</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const</span>{
<a name="l00235"></a>00235         <span class="comment">//controllo che i sia &gt;0 e &lt; della dimensione</span>
<a name="l00236"></a>00236         <span class="keywordflow">if</span>(i&lt;_n &amp;&amp; i&gt;=0) <span class="keywordflow">return</span> _tax[i];
<a name="l00237"></a>00237         <span class="keywordflow">else</span> {
<a name="l00238"></a>00238                 <a class="code" href="classErrorList.html#a1e0bae7f5e739abfebbc8c1513783e2" title="funzione che chiama il costruttore">ErrorList::Get_errorlist</a>()-&gt;<a class="code" href="classErrorList.html#ae61ca67f3f91063faa122307ba4d05a" title="funzione che consente l&amp;#39;aggiunta di un errore al file">Add_error</a>(<span class="stringliteral">"Yield_curve_term_struct::(Get_tax)  this tax doesn't exist"</span>);
<a name="l00239"></a>00239                 <span class="keywordflow">return</span> 0;
<a name="l00240"></a>00240         }
<a name="l00241"></a>00241 };
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 
<a name="l00245"></a><a class="code" href="classYield__curve__term__struct.html#fb9021c28f9863431c19845183ef6f96">00245</a> <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> <a class="code" href="classYield__curve__term__struct.html#fb9021c28f9863431c19845183ef6f96" title="funzione che restituisce l&amp;#39;iesimo intervallo temporale">Yield_curve_term_struct::Get_time</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const</span>{
<a name="l00246"></a>00246         <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> ris;
<a name="l00247"></a>00247         <span class="comment">//controllo che i sia &gt;0 e &lt; della dimensione</span>
<a name="l00248"></a>00248         <span class="keywordflow">if</span>(i&lt;(_n-1) &amp;&amp; i&gt;=0) ris=_time[i];
<a name="l00249"></a>00249         <span class="keywordflow">else</span> {
<a name="l00250"></a>00250                 <a class="code" href="classErrorList.html#a1e0bae7f5e739abfebbc8c1513783e2" title="funzione che chiama il costruttore">ErrorList::Get_errorlist</a>()-&gt;<a class="code" href="classErrorList.html#ae61ca67f3f91063faa122307ba4d05a" title="funzione che consente l&amp;#39;aggiunta di un errore al file">Add_error</a>(<span class="stringliteral">"Yield_curve_term_struct::(Get_time) this time doesn't exist"</span>);
<a name="l00251"></a>00251         }
<a name="l00252"></a>00252         <span class="keywordflow">return</span> ris;
<a name="l00253"></a>00253 };
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="comment">//#########################################################################################################</span>
<a name="l00256"></a>00256 <span class="comment">//FUNZIONI SET</span>
<a name="l00257"></a>00257 <span class="comment">//#########################################################################################################</span>
<a name="l00258"></a>00258 
<a name="l00260"></a><a class="code" href="classYield__curve__term__struct.html#99e4d2dbb4cbdf011a97932103579e4e">00260</a> <span class="keywordtype">void</span> <a class="code" href="classYield__curve__term__struct.html#99e4d2dbb4cbdf011a97932103579e4e" title="funzione che imposta la dimensione, ovvero il numero di punti">Yield_curve_term_struct::Set_n</a>(<span class="keywordtype">int</span> n){
<a name="l00261"></a>00261         <span class="keywordflow">if</span>(n!=_n){
<a name="l00262"></a>00262                 <span class="comment">//creo una nuova curva della giusta dimensione</span>
<a name="l00263"></a>00263                 <a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a> ris(n);
<a name="l00264"></a>00264                 <span class="comment">//copio tutti gli elementi che stanno nella nuova dimensione</span>
<a name="l00265"></a>00265                 <span class="keywordflow">if</span>(n&gt;_n){
<a name="l00266"></a>00266                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;_n-1;i++) ris.<a class="code" href="classYield__curve__term__struct.html#680a58b0eaf2f0b50b44e4c7b5558690">_time</a>[i]=_time[i];
<a name="l00267"></a>00267                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;_n;i++) ris.<a class="code" href="classYield__curve__term__struct.html#52cdd454428b2d16c6b1e2ab783f1e88">_tax</a>[i]=_tax[i];
<a name="l00268"></a>00268                 }
<a name="l00269"></a>00269                 <span class="keywordflow">if</span>(n&lt;_n){
<a name="l00270"></a>00270                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;n-1;i++) ris.<a class="code" href="classYield__curve__term__struct.html#680a58b0eaf2f0b50b44e4c7b5558690">_time</a>[i]=_time[i];
<a name="l00271"></a>00271                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;n;i++) ris.<a class="code" href="classYield__curve__term__struct.html#52cdd454428b2d16c6b1e2ab783f1e88">_tax</a>[i]=_tax[i];
<a name="l00272"></a>00272 
<a name="l00273"></a>00273                 }
<a name="l00274"></a>00274                 (*this)=ris;
<a name="l00275"></a>00275         }
<a name="l00276"></a>00276 };
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 
<a name="l00280"></a><a class="code" href="classYield__curve__term__struct.html#96f56cef449ee49bab43464e93ccb507">00280</a> <span class="keywordtype">void</span> <a class="code" href="classYield__curve__term__struct.html#96f56cef449ee49bab43464e93ccb507" title="funzione che imposta il tasso all&amp;#39;i-esimo intervallo temporale">Yield_curve_term_struct::Set_tax</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">double</span> tax){
<a name="l00281"></a>00281         <span class="comment">//controllo che i sia &gt;0 e &lt; della dimensione</span>
<a name="l00282"></a>00282         <span class="keywordflow">if</span>(i&lt;_n &amp;&amp; i&gt;=0) {
<a name="l00283"></a>00283                 _tax[i]=tax;
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285         <span class="keywordflow">else</span> {
<a name="l00286"></a>00286                 <a class="code" href="classErrorList.html#a1e0bae7f5e739abfebbc8c1513783e2" title="funzione che chiama il costruttore">ErrorList::Get_errorlist</a>()-&gt;<a class="code" href="classErrorList.html#ae61ca67f3f91063faa122307ba4d05a" title="funzione che consente l&amp;#39;aggiunta di un errore al file">Add_error</a>(<span class="stringliteral">"Yield_curve_term_struct::(Set_tax) this tax doesn't exist"</span>);
<a name="l00287"></a>00287         }
<a name="l00288"></a>00288 };
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00292"></a><a class="code" href="classYield__curve__term__struct.html#a6c0311d5fdb8f42dae448323c68bb9a">00292</a> <span class="keywordtype">void</span> <a class="code" href="classYield__curve__term__struct.html#a6c0311d5fdb8f42dae448323c68bb9a" title="funzione che imposta l&amp;#39;i-esimo intervallo temporale">Yield_curve_term_struct::Set_time</a>(<span class="keywordtype">int</span> i, <span class="keyword">const</span> <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> &amp;time){
<a name="l00293"></a>00293         <span class="comment">//controllo che i sia &gt;0 e &lt; della dimensione</span>
<a name="l00294"></a>00294         <span class="keywordflow">if</span>(i&lt;(_n-1) &amp;&amp; i&gt;=0) {
<a name="l00295"></a>00295                 _time[i]=time;
<a name="l00296"></a>00296         }
<a name="l00297"></a>00297         <span class="keywordflow">else</span> {
<a name="l00298"></a>00298                 <a class="code" href="classErrorList.html#a1e0bae7f5e739abfebbc8c1513783e2" title="funzione che chiama il costruttore">ErrorList::Get_errorlist</a>()-&gt;<a class="code" href="classErrorList.html#ae61ca67f3f91063faa122307ba4d05a" title="funzione che consente l&amp;#39;aggiunta di un errore al file">Add_error</a>(<span class="stringliteral">"Yield_curve_term_struct::(Set_time) this time doesn't exist"</span>);
<a name="l00299"></a>00299         }
<a name="l00300"></a>00300 };
<a name="l00301"></a>00301 
<a name="l00302"></a>00302 <span class="comment">//#########################################################################################################</span>
<a name="l00303"></a>00303 <span class="comment">//OVERLOADING DEL &lt;&lt;</span>
<a name="l00304"></a>00304 <span class="comment">//#########################################################################################################</span>
<a name="l00305"></a>00305 
<a name="l00306"></a>00306 <span class="comment">// overloading dell'operatore "&lt;&lt;"</span>
<a name="l00307"></a><a class="code" href="classYield__curve__term__struct.html#966558d5e4570638906b064755a71401">00307</a> std::ostream &amp;<a class="code" href="classYield__curve__term__struct.html#966558d5e4570638906b064755a71401" title="overloading dell&amp;#39;operatore &amp;quot;&amp;lt;&amp;lt;&amp;quot;">operator&lt;&lt;</a>(std::ostream &amp;os, <span class="keyword">const</span> <a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a> &amp;nor) {
<a name="l00308"></a>00308         <a class="code" href="classTime.html" title="Classe che rappresenta un istante temporale.">Time</a> today=(*(<a class="code" href="classTime.html#c3f93f083ec4044299a6dc78d30c84a2" title="funzioine che crea il link statico all&amp;#39;oggetto today">Time::Get_today</a>()));
<a name="l00309"></a>00309         os&lt;&lt;<span class="stringliteral">"n\tdate\ttime\t\trate\t"</span>&lt;&lt;std::endl;
<a name="l00310"></a>00310         os&lt;&lt;(1)&lt;&lt;<span class="stringliteral">"\t"</span>&lt;&lt;today&lt;&lt;<span class="stringliteral">"\t\t"</span>&lt;&lt;nor.<a class="code" href="classYield__curve__term__struct.html#67edabb26e69d721be384593801d02a5" title="funzione che restituisce l&amp;#39;iesimo tasso-spot ( tasso all&amp;#39;i-esimo tempo)">Get_tax</a>(0)&lt;&lt;std::endl;
<a name="l00311"></a>00311         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1;i&lt;nor.<a class="code" href="classYield__curve__term__struct.html#e855a12d9958faff988a02e29f16f578" title="funzione che restituisce il numero di punti">Get_n</a>();i++) {
<a name="l00312"></a>00312                 os&lt;&lt;(i+1)&lt;&lt;<span class="stringliteral">"\t"</span>&lt;&lt;(today+nor.<a class="code" href="classYield__curve__term__struct.html#fb9021c28f9863431c19845183ef6f96" title="funzione che restituisce l&amp;#39;iesimo intervallo temporale">Get_time</a>(i-1))&lt;&lt;<span class="stringliteral">"\t\t"</span>&lt;&lt;nor.<a class="code" href="classYield__curve__term__struct.html#67edabb26e69d721be384593801d02a5" title="funzione che restituisce l&amp;#39;iesimo tasso-spot ( tasso all&amp;#39;i-esimo tempo)">Get_tax</a>(i)&lt;&lt;std::endl;
<a name="l00313"></a>00313         }
<a name="l00314"></a>00314         <span class="keywordflow">return</span> os;
<a name="l00315"></a>00315 };
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="comment">//#########################################################################################################</span>
<a name="l00318"></a>00318 <span class="comment">//FUNZIONI RISKFREE</span>
<a name="l00319"></a>00319 <span class="comment">//#########################################################################################################</span>
<a name="l00320"></a>00320 
<a name="l00322"></a><a class="code" href="classYield__curve__term__struct.html#f3cbddc0c35f853fd0e50d2b1d82f157">00322</a> <a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a>* <a class="code" href="classYield__curve__term__struct.html#f3cbddc0c35f853fd0e50d2b1d82f157" title="funzione che restituisce un puntatore al membro statico risk-free (e di crearlo)">Yield_curve_term_struct::Get_riskfree</a>() {
<a name="l00323"></a>00323         <span class="keyword">static</span> <a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a> *_riskfree = <span class="keyword">new</span> <a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a>;
<a name="l00324"></a>00324         <span class="keywordflow">return</span> _riskfree;
<a name="l00325"></a>00325 };
<a name="l00326"></a>00326 
<a name="l00327"></a>00327 
<a name="l00329"></a><a class="code" href="classYield__curve__term__struct.html#f7cd9fd15e65824fb434957beb75d705">00329</a> <span class="keywordtype">void</span> <a class="code" href="classYield__curve__term__struct.html#6209781e483c130cb17c2cbbbce6a694" title="permette di impostare la curva dei tassi risk-free ( come copia di un altro oggetto...">Yield_curve_term_struct::Set_riskfree</a>(<span class="keywordtype">int</span> n, <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a> *time, <span class="keywordtype">double</span> *tax){
<a name="l00330"></a>00330         <span class="comment">//setta dimensione</span>
<a name="l00331"></a>00331         (<a class="code" href="classYield__curve__term__struct.html#f3cbddc0c35f853fd0e50d2b1d82f157" title="funzione che restituisce un puntatore al membro statico risk-free (e di crearlo)">Get_riskfree</a>())-&gt;_n=n;
<a name="l00332"></a>00332         <span class="comment">//crea il vettore dei deltatime</span>
<a name="l00333"></a>00333         (<a class="code" href="classYield__curve__term__struct.html#f3cbddc0c35f853fd0e50d2b1d82f157" title="funzione che restituisce un puntatore al membro statico risk-free (e di crearlo)">Get_riskfree</a>())-&gt;_time=<span class="keyword">new</span> <a class="code" href="classDeltatime.html" title="Classe che rappresenta un intervallo temporale.">Deltatime</a>[n-1];
<a name="l00334"></a>00334         <span class="comment">//copia il vettore dei deltatime</span>
<a name="l00335"></a>00335         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;n-1;i++){
<a name="l00336"></a>00336                 (<a class="code" href="classYield__curve__term__struct.html#f3cbddc0c35f853fd0e50d2b1d82f157" title="funzione che restituisce un puntatore al membro statico risk-free (e di crearlo)">Get_riskfree</a>())-&gt;_time[i]=time[i];
<a name="l00337"></a>00337         }
<a name="l00338"></a>00338         <span class="comment">//crea il vettore dei tassi</span>
<a name="l00339"></a>00339         (<a class="code" href="classYield__curve__term__struct.html#f3cbddc0c35f853fd0e50d2b1d82f157" title="funzione che restituisce un puntatore al membro statico risk-free (e di crearlo)">Get_riskfree</a>())-&gt;_tax=<span class="keyword">new</span> <span class="keywordtype">double</span>[n];
<a name="l00340"></a>00340         <span class="comment">//copia il vettore dei tassi</span>
<a name="l00341"></a>00341         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;n;i++){
<a name="l00342"></a>00342                 (<a class="code" href="classYield__curve__term__struct.html#f3cbddc0c35f853fd0e50d2b1d82f157" title="funzione che restituisce un puntatore al membro statico risk-free (e di crearlo)">Get_riskfree</a>())-&gt;_tax[i]=tax[i];
<a name="l00343"></a>00343         }
<a name="l00344"></a>00344 };
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 
<a name="l00348"></a><a class="code" href="classYield__curve__term__struct.html#6209781e483c130cb17c2cbbbce6a694">00348</a> <span class="keywordtype">void</span> <a class="code" href="classYield__curve__term__struct.html#6209781e483c130cb17c2cbbbce6a694" title="permette di impostare la curva dei tassi risk-free ( come copia di un altro oggetto...">Yield_curve_term_struct::Set_riskfree</a>(<a class="code" href="classYield__curve__term__struct.html" title="Classe che rappresenta una curva dei tassi complessa, costruita sull’interpolazione...">Yield_curve_term_struct</a> &amp;y){
<a name="l00349"></a>00349         <span class="comment">//l'oggetto puntato dal membro statico uguale all'oggetto passato al metodo</span>
<a name="l00350"></a>00350         *(<a class="code" href="classYield__curve__term__struct.html#f3cbddc0c35f853fd0e50d2b1d82f157" title="funzione che restituisce un puntatore al membro statico risk-free (e di crearlo)">Get_riskfree</a>())=y;
<a name="l00351"></a>00351 };
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 <span class="comment">//#########################################################################################################</span>
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 
<a name="l00358"></a>00358 
<a name="l00359"></a>00359 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generato il Tue Apr 20 01:11:28 2010 per Progetto per il pricing di un'opzione da&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
